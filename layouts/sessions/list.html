{{- define "main" }}
  <style>
    header.session-list,
    section.session-list {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }

    header.session-list {
      margin-bottom: 3.75rem;
    }

    section.session-list {
      background-color: var(--color-secondary);
      padding: 3.75rem 0;
    }

    section.session-list > article {
      margin-bottom: 3.75rem;
    }

    section.session-list > article > h1 {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--color-primary);
    }
    section.session-list > article > h2 {
      font-size: 1.625rem;
      font-weight: 700;
    }
    section.session-list > article > h3 {
      font-size: 1.625rem;
      font-weight: 700;
    }
    section.session-list > article > menu {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }
    @keyframes fadeOut {
      0% {
        opacity: 1;
      }
      100% {
        opacity: 0;
      }
    }

    header
      > input[value="day-0"]:checked
      ~ section
      > article.session-list-day:not([data-day="0"]),
    [value="day-1"]:checked ~ article.session-list-day:not([data-day="1"]),
    [value="day-2"]:checked ~ article.session-list-day:not([data-day="2"]) {
      display: none;
      animation: fadeOut 0.25s;
    }

    [value="day-0"]:not(:checked) ~ article.session-list-day[data-day="0"],
    [value="day-1"]:not(:checked) ~ article.session-list-day[data-day="1"],
    [value="day-2"]:not(:checked) ~ article.session-list-day[data-day="2"] {
      animation: fadeIn 0.25s;
    }
  </style>

  {{- $sessionsGroupedByDay := .Pages.GroupByParamDate "date" "2006-01-02" "asc" }}


  <header class="session-list">
    <article class="theme-content">
      <h1>{{ T "list_sessions_title" }}</h1>
    </article>
  </header>

  <section class="session-list">
    {{- if ($sessionsGroupedByDay | len) }}
      {{- range $index, $element := $sessionsGroupedByDay }}
        <label for="filter-day-{{ $index }}">
          {{ T "list_sessions_day" (add $index 1) }}
        </label>
        <input
          name="filter-day"
          type="radio"
          value="day-{{ $index }}"
          id="filter-day-{{ $index }}"
          {{- if eq $index 0 }}
            checked
          {{- end }}
        />
      {{- end }}
    {{- end }}
    {{- range $index, $element := $sessionsGroupedByDay }}
      <article class="theme-content session-list-day" data-day="{{- $index }}">
        <h1>{{ T "list_sessions_day" (add $index 1) }}</h1>
        <h2>{{ .Key | time.Format ":date_long" }}</h2>
        {{- range .Pages.GroupByParamDate "startsAt" "2006-01-02T15:04:00" "asc" }}
          <h3>{{ .Key | time.Format ":time_short" }}</h3>
          <menu>
            {{- range .Pages }}
              {{- $page := . }}
              <li>
                {{- $transformedSpeakers := slice }}
                {{- range .Params.speakers }}
                  {{- $speakerAvatarResource := ($page.Resources.GetMatch (printf "avatar-%s.*" .id)) }}
                  {{- $transformedSpeakers = $transformedSpeakers | append (dict "name" .fullName) }}
                  {{- $transformedSpeakers = $transformedSpeakers | append (dict "avatarResource" $speakerAvatarResource) }}
                {{- end }}
                {{- partial "event-row.html" (
                  dict
                  "track" "TRACK1LONGTITLE"
                  "title" .Title
                  "link" .RelPermalink
                  "speakers" $transformedSpeakers
                  "isServiceSession" .Params.isServiceSession
                  "room" .Params.room.name
                  )
                }}
              </li>
            {{- end }}
          </menu>
        {{- end }}
      </article>
    {{- end }}
  </section>

  {{- partial "sections/cta.html" (
    dict
    "eventbriteId" .Site.Params.themes.event.callToAction.eventbrite.eventId
    "ctaUrl" .Site.Params.themes.event.callToAction.other.url
    )
  }}
{{- end }}
